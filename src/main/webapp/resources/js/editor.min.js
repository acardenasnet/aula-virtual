(function(e){var t={saveSelection:function(){e(this).data("editor").focus();if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){e(this).data("currentRange",sel.getRangeAt(0))}}else if(document.selection&&document.selection.createRange){e(this).data("currentRange",document.selection.createRange())}else e(this).data("currentRange",null)},restoreSelection:function(t,n){var r;typeof t!=="undefined"?t:false;typeof n!=="undefined"?n:"";var i=e(this).data("currentRange");if(i){if(window.getSelection){if(t){i.deleteContents();if(n=="html"){var s=document.createElement("div");s.innerHTML=t;var o=document.createDocumentFragment(),r,u;while(r=s.firstChild){u=o.appendChild(r)}i.insertNode(o)}else i.insertNode(document.createTextNode(t))}sel=window.getSelection();sel.removeAllRanges();sel.addRange(i)}else if(document.selection&&i.select){i.select();if(t){if(n=="html")i.pasteHTML(t);else i.text=t}}}},restoreIESelection:function(){var t=e(this).data("currentRange");if(t){if(window.getSelection){sel=window.getSelection();sel.removeAllRanges();sel.addRange(t)}else if(document.selection&&t.select){t.select()}}},insertTextAtSelection:function(e,t){var n,r,i;typeof t!=="undefined"?t:"";if(window.getSelection){n=window.getSelection();if(n.getRangeAt&&n.rangeCount){r=n.getRangeAt(0);r.deleteContents();var s=document.createTextNode(e);if(t=="html"){var o=document.createElement("div");o.innerHTML=e;var u=document.createDocumentFragment(),i,a;while(i=o.firstChild){a=u.appendChild(i)}r.insertNode(u)}else{r.insertNode(s);r.selectNode(s)}n.removeAllRanges();r=r.cloneRange();r.collapse(false);n.addRange(r)}}else if(document.selection&&document.selection.createRange){r=document.selection.createRange();r.pasteHTML(e);r.select()}},imageWidget:function(){var n=e("<div/>",{"class":"row"}).append(e("<div/>",{id:"imgErrMsg"}));var r=e("<div/>",{"class":"tabbable tabs-left"});var i=e("<ul/>",{"class":"nav nav-tabs"}).append(e("<li/>",{"class":"active"}).append(e("<a/>",{href:"#uploadImageBar","data-toggle":"tab"}).html("From Computer"))).append(e("<li/>").append(e("<a/>",{href:"#imageFromLinkBar","data-toggle":"tab"}).html("From URL")));var s=e("<div/>",{"class":"tab-content"});var o=e("<div/>",{id:"uploadImageBar","class":"tab-pane active"});handleFileSelect=function(n){var r=n.target.files;var i=[];for(var s=0,o;o=r[s];s++){if(!o.type.match("image.*")||!o.name.match(/(?:gif|jpg|png|jpeg)$/)){t.showMessage.apply(this,["imgErrMsg","Invalid file type"]);continue}var u=new FileReader;u.onload=function(t){return function(n){var r=e("<li/>",{"class":"col-xs-12 col-sm-6 col-md-3 col-lg-3"});var i=e("<a/>",{href:"javascript:void(0)","class":"thumbnail"});var s=e("<img/>",{src:n.target.result,title:escape(t.name)}).appendTo(i).click(function(){e("#imageList").data("current",e(this).attr("src"))});r.append(i).appendTo(e("#imageList"))}}(o);u.readAsDataURL(o)}};var u=e("<input/>",{type:"file","class":"inline-form-control",multiple:"multiple"});u.on("change",handleFileSelect);o.append(u);var a=e("<div/>",{id:"imageFromLinkBar","class":"tab-pane"});var f=e("<div/>",{"class":"input-group"});var l=e("<input/>",{type:"url","class":"form-control",id:"imageURL",placeholder:"Enter URL"}).appendTo(f);var c=e("<button/>",{"class":"btn btn-success",type:"button"}).html("Go!").click(function(){var n=e("#imageURL").val();if(n==""){t.showMessage.apply(this,["imgErrMsg","Please enter image url"]);return false}var r=e("<li/>",{"class":"span6 col-xs-12 col-sm-6 col-md-3 col-lg-3"});var i=e("<a/>",{href:"javascript:void(0)","class":"thumbnail"});var s=e("<img/>",{src:n}).error(function(){t.showMessage.apply(this,["imgErrMsg","Invalid image url"]);return false}).load(function(){e(this).appendTo(i).click(function(){e("#imageList").data("current",e(this).attr("src"))});r.append(i).appendTo(e("#imageList"))})}).appendTo(e("<span/>",{"class":"input-group-btn form-control-button-right"}).appendTo(f));a.append(f);s.append(o).append(a);r.append(i).append(s);var h=e("<div/>",{"class":"col-xs-12 col-sm-12 col-md-12 col-lg-12"});var p=e("<ul/>",{"class":"thumbnails padding-top list-unstyled",id:"imageList"}).appendTo(h);n.append(r).append(h);return n},tableWidget:function(t){var n="";if(typeof t!=="undefined")n="Edt";var r=e("<div/>",{"class":"row-fluid"}).append(e("<div/>",{id:"tblErrMsg"+n})).append(e("<form/>",{id:"tblForm"+n}).append(e("<div/>",{"class":"row"}).append(e("<div/>",{id:"tblInputsLeft"+n,"class":"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{"for":"tblRows"+n,text:"Rows"})).append(e("<input/>",{id:"tblRows"+n,type:"text","class":"form-control form-control-width",value:2})).append(e("<label/>",{"for":"tblColumns"+n,text:"Columns"})).append(e("<input/>",{id:"tblColumns"+n,type:"text","class":"form-control form-control-width",value:2})).append(e("<label/>",{"for":"tblWidth"+n,text:"Width"})).append(e("<input/>",{id:"tblWidth"+n,type:"text","class":"form-control form-control-width",value:400})).append(e("<label/>",{"for":"tblHeight"+n,text:"Height"})).append(e("<input/>",{id:"tblHeight"+n,type:"text","class":"form-control form-control-width"}))).append(e("<div/>",{id:"tblInputsRight"+n,"class":"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{"for":"tblAlign"+n,text:"Alignment"})).append(e("<select/>",{id:"tblAlign"+n,"class":"form-control form-control-width"}).append(e("<option/>",{text:"Choose",value:""})).append(e("<option/>",{text:"Left",value:"left"})).append(e("<option/>",{text:"Center",value:"center"})).append(e("<option/>",{text:"Right",value:"right"}))).append(e("<label/>",{"for":"tblBorder"+n,text:"Border size"})).append(e("<input/>",{id:"tblBorder"+n,type:"text","class":"form-control form-control-width",value:1})).append(e("<label/>",{"for":"tblCellspacing"+n,text:"Cell spacing"})).append(e("<input/>",{id:"tblCellspacing"+n,type:"text","class":"form-control form-control-width",value:1})).append(e("<label/>",{"for":"tblCellpadding"+n,text:"Cell padding"})).append(e("<input/>",{id:"tblCellpadding"+n,type:"text","class":"form-control form-control-width",value:1})))));return r},imageAttributeWidget:function(){var t=e("<div/>",{"class":"row-fluid"}).append(e("<div/>",{id:"imageErrMsg"})).append(e("<input/>",{id:"imgAlt",type:"text","class":"form-control form-control-link ",placeholder:"Alt Text"})).append(e("<input/>",{id:"imgTarget","class":"form-control form-control-link ",type:"text",placeholder:"Link Target"})).append(e("<input/>",{id:"imgHidden",type:"hidden"}));return t},getHTMLTable:function(t,n,r){var i=e("<table/>",{"class":"table"});for(var s=0;s<r.length;s++){if(r[s].value!=""){if(r[s].attribute=="width"||r[s].attribute=="height")i.css(r[s].attribute,r[s].value);else i.attr(r[s].attribute,r[s].value)}}for(var s=1;s<=t;s++){var o=e("<tr/>");for(var u=1;u<=n;u++){var a=e("<td/>").html("&nbsp;");a.appendTo(o)}o.appendTo(i)}return i},init:function(n){var r={"Sans serif":"arial,helvetica,sans-serif",Serif:"times new roman,serif",Wide:"arial black,sans-serif",Narrow:"arial narrow,sans-serif","Comic Sans MS":"comic sans ms,sans-serif","Courier New":"courier new,monospace",Garamond:"garamond,serif",Georgia:"georgia,serif",Tahoma:"tahoma,sans-serif","Trebuchet MS":"trebuchet ms,sans-serif",Verdana:"verdana,sans-serif"};var i={"Heading 1":"<h1>","Heading 2":"<h2>","Heading 3":"<h3>","Heading 4":"<h4>","Heading 5":"<h5>","Heading 6":"<h6>",Paragraph:"<p>"};var s={Small:"2",Normal:"3",Medium:"4",Large:"5",Huge:"6"};var o=[{name:"Black",hex:"#000000"},{name:"MediumBlack",hex:"#444444"},{name:"LightBlack",hex:"#666666"},{name:"DimBlack",hex:"#999999"},{name:"Gray",hex:"#CCCCCC"},{name:"DimGray",hex:"#EEEEEE"},{name:"LightGray",hex:"#F3F3F3"},{name:"White",hex:"#FFFFFF"},{name:"libreak",hex:null},{name:"Red",hex:"#FF0000"},{name:"Orange",hex:"#FF9900"},{name:"Yellow",hex:"#FFFF00"},{name:"Lime",hex:"#00FF00"},{name:"Cyan",hex:"#00FFFF"},{name:"Blue",hex:"#0000FF"},{name:"BlueViolet",hex:"#8A2BE2"},{name:"Magenta",hex:"#FF00FF"},{name:"libreak",hex:null},{name:"LightPink",hex:"#FFB6C1"},{name:"Bisque",hex:"#FCE5CD"},{name:"BlanchedAlmond",hex:"#FFF2CC"},{name:"LightLime",hex:"#D9EAD3"},{name:"LightCyan",hex:"#D0E0E3"},{name:"AliceBlue",hex:"#CFE2F3"},{name:"Lavender",hex:"#D9D2E9"},{name:"Thistle",hex:"#EAD1DC"},{name:"LightCoral",hex:"#EA9999"},{name:"Wheat",hex:"#F9CB9C"},{name:"NavajoWhite",hex:"#FFE599"},{name:"DarkSeaGreen",hex:"#B6D7A8"},{name:"LightBlue",hex:"#A2C4C9"},{name:"SkyBlue",hex:"#9FC5E8"},{name:"LightPurple",hex:"#B4A7D6"},{name:"PaleVioletRed",hex:"#D5A6BD"},{name:"IndianRed",hex:"#E06666"},{name:"LightSandyBrown",hex:"#F6B26B"},{name:"Khaki",hex:"#FFD966"},{name:"YellowGreen",hex:"#93C47D"},{name:"CadetBlue",hex:"#76A5AF"},{name:"DeepSkyBlue",hex:"#6FA8DC"},{name:"MediumPurple",hex:"#8E7CC3"},{name:"MediumVioletRed",hex:"#C27BA0"},{name:"Crimson",hex:"#CC0000"},{name:"SandyBrown",hex:"#E69138"},{name:"Gold",hex:"#F1C232"},{name:"MediumSeaGreen",hex:"#6AA84F"},{name:"Teal",hex:"#45818E"},{name:"SteelBlue",hex:"#3D85C6"},{name:"SlateBlue",hex:"#674EA7"},{name:"VioletRed",hex:"#A64D79"},{name:"Brown",hex:"#990000"},{name:"Chocolate",hex:"#B45F06"},{name:"GoldenRod",hex:"#BF9000"},{name:"Green",hex:"#38761D"},{name:"SlateGray",hex:"#134F5C"},{name:"RoyalBlue",hex:"#0B5394"},{name:"Indigo",hex:"#351C75"},{name:"Maroon",hex:"#741B47"},{name:"DarkRed",hex:"#660000"},{name:"SaddleBrown",hex:"#783F04"},{name:"DarkGoldenRod",hex:"#7F6000"},{name:"DarkGreen",hex:"#274E13"},{name:"DarkSlateGray",hex:"#0C343D"},{name:"Navy",hex:"#073763"},{name:"MidnightBlue",hex:"#20124D"},{name:"DarkMaroon",hex:"#4C1130"}];var u=[{name:"Exclamation ",text:"!"},{name:"At",text:"@"},{name:"Hash",text:"#"},{name:"Percentage",text:"%"},{name:"Uppercase",text:"^"},{name:"Ampersand",text:"&"},{name:"Asterisk",text:"*"},{name:"OpenBracket",text:"("},{name:"CloseBracket",text:")"},{name:"Underscore",text:"_"},{name:"Hiphen",text:"-"},{name:"Plus",text:"+"},{name:"Equalto",text:"="},{name:"OpenSquareBracket",text:"["},{name:"CloseSquareBracket",text:"]"},{name:"OpenCurly",text:"{"},{name:"CloseCurly",text:"}"},{name:"Pipe",text:"|"},{name:"Colon",text:":"},{name:"Semicolon",text:";"},{name:"Single quote",text:"&#39;"},{name:"Double quote",text:"&#34;"},{name:"Left single curly quote",text:"&lsquo;"},{name:"right single curly quote",text:"&rsquo;"},{name:"Forward-slash",text:"&#47;"},{name:"Back-slash",text:"&#92;"},{name:"LessThan",text:"<"},{name:"GreaterThan",text:">"},{name:"QuestionMark",text:"?"},{name:"Tilda",text:"~"},{name:"Grave accent",text:"`"},{name:"Micron",text:"&micro;"},{name:"Paragraph sign",text:"&para;"},{name:"Plus/minus",text:"&plusmn;"},{name:"Trademark",text:"&trade;"},{name:"Copyright",text:"&copy;"},{name:"Registered",text:"&reg;"},{name:"Section",text:"&sect;"},{name:"right double angle quotes",text:"&#187;"},{name:"fraction one quarter",text:"&#188;"},{name:"fraction one half",text:"&#189;"},{name:"fraction three quarters",text:"&#190;"},{name:"Dollar",text:"$"},{name:"Euro",text:"&euro;"},{name:"Pound",text:"&pound;"},{name:"Yen",text:"&yen;"},{name:"Cent",text:"&#162;"},{name:"IndianRupee",text:"&#8377;"}];var a={fonteffects:true,texteffects:true,aligneffects:true,textformats:true,actions:true,insertoptions:true,extraeffects:true,advancedoptions:true,screeneffects:true,fonts:{select:true,"default":"Font",tooltip:"Fonts",commandname:"fontName",custom:null},styles:{select:true,"default":"Formatting",tooltip:"Paragraph Format",commandname:"formatBlock",custom:null},font_size:{select:true,"default":"Font size",tooltip:"Font Size",commandname:"fontSize",custom:null},color:{text:"A",icon:"fa fa-font",tooltip:"Text/Background Color",commandname:null,custom:function(n){var r=0;var i=e("<div/>",{id:"paletteCntr","class":"activeColour",css:{display:"none",width:"335px"}}).click(function(e){e.stopPropagation()});var s=e("<div/>",{id:"colorpellete"});var u=e("<ul />",{id:"color_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Text Color</div>"));var a=e("<div/>",{id:"bg_colorpellete"});var f=e("<ul />",{id:"bgcolor_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Background Color</div>"));if(e("#contentarea").data("colorBtn")){r=1;e("#contentarea").data("colorBtn",null)}else e("#contentarea").data("colorBtn",1);if(r==0){for(var l=0;l<o.length;l++){if(o[l].hex!=null){u.append(e("<li />").css("background-color",o[l].hex).mousedown(function(e){e.preventDefault()}).click(function(){var n=t.rgbToHex.apply(this,[e(this).css("background-color")]);t.restoreSelection.apply(this);t.setStyleWithCSS.apply(this);document.execCommand("forecolor",false,n);e("#paletteCntr").remove();e("#contentarea").data("colorBtn",null)}));f.append(e("<li />").css("background-color",o[l].hex).mousedown(function(e){e.preventDefault()}).click(function(){var n=t.rgbToHex.apply(this,[e(this).css("background-color")]);t.restoreSelection.apply(this);t.setStyleWithCSS.apply(this);document.execCommand("backColor",false,n);e("#paletteCntr").remove();e("#contentarea").data("colorBtn",null)}))}else{u.append(e("<li />").css({width:"145px",display:"Block",height:"5px"}));f.append(e("<li />").css({width:"145px",display:"Block",height:"5px"}))}}u.appendTo(s);f.appendTo(a);s.appendTo(i);a.appendTo(i);i.insertAfter(n);e("#paletteCntr").slideDown("slow")}else e("#paletteCntr").remove()}},bold:{text:"B",icon:"fa fa-bold",tooltip:"Bold",commandname:"bold",custom:null},italics:{text:"I",icon:"fa fa-italic",tooltip:"Italics",commandname:"italic",custom:null},underline:{text:"U",icon:"fa fa-underline",tooltip:"Underline",commandname:"underline",custom:null},strikeout:{text:"Strikeout",icon:"fa fa-strikethrough",tooltip:"Strike Through",commandname:"strikeThrough",custom:null},ol:{text:"N",icon:"fa fa-list-ol",tooltip:"Insert/Remove Numbered List",commandname:"insertorderedlist",custom:null},ul:{text:"Bullet",icon:"fa fa-list-ul",tooltip:"Insert/Remove Bulleted List",commandname:"insertunorderedlist",custom:null},undo:{text:"undo",icon:"fa fa-undo",tooltip:"Undo",commandname:"undo",custom:null},redo:{text:"redo",icon:"fa fa-repeat",tooltip:"Redo",commandname:"redo",custom:null},l_align:{text:"leftalign",icon:"fa fa-align-left",tooltip:"Align Left",commandname:"justifyleft",custom:null},r_align:{text:"rightalign",icon:"fa fa-align-right",tooltip:"Align Right",commandname:"justifyright",custom:null},c_align:{text:"centeralign",icon:"fa fa-align-center",tooltip:"Align Center",commandname:"justifycenter",custom:null},justify:{text:"justify",icon:"fa fa-align-justify",tooltip:"Justify",commandname:"justifyfull",custom:null},unlink:{text:"Unlink",icon:"fa fa-unlink",tooltip:"Unlink",commandname:"unlink",custom:null},insert_link:{modal:true,modalId:"InsertLink",icon:"fa fa-link",tooltip:"Insert Link",modalHeader:"Insert Hyperlink",modalBody:e("<div/>",{"class":"form-group"}).append(e("<div/>",{id:"errMsg"})).append(e("<input/>",{type:"text",id:"inputText","class":"form-control form-control-link ",placeholder:"Text to Display"})).append(e("<input/>",{type:"text",id:"inputUrl",required:true,"class":"form-control form-control-link",placeholder:"Enter URL"})),beforeLoad:function(){e("#inputText").val("");e("#inputUrl").val("");e(".alert").alert("close");if(e(this).data("currentRange")!=""){e("#inputText").val(e(this).data("currentRange"))}},onSave:function(){var n=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/;var r=e("#inputText").val();var i=e("#inputUrl").val();var s=e(this).data("currentRange");if(i==""){t.showMessage.apply(this,["errMsg","Please enter url"]);return false}if(!i.match(n)){t.showMessage.apply(this,["errMsg","Enter valid url"]);return false}if(s==""&&r==""){r=i}if(navigator.userAgent.match(/MSIE/i)){var o='<a href="'+i+'" target="_blank">'+r+"</a>";t.restoreSelection.apply(this,[o,"html"])}else{t.restoreSelection.apply(this,[r]);document.execCommand("createLink",false,i)}e("#contentarea").find('a[href="'+i+'"]').each(function(){e(this).attr("target","_blank")});e(".alert").alert("close");e("#InsertLink").modal("hide");e("#contentarea").focus();return false}},insert_img:{modal:true,modalId:"InsertImage",icon:"fa fa-picture-o",tooltip:"Insert Image",modalHeader:"Insert Image",modalBody:t.imageWidget.apply(this),beforeLoad:function(){e("#imageURL").val("");e("#uploadImageBar :input").val("");e("#imageList").data("current","")},onSave:function(){t.restoreSelection.apply(this);if(e("#imageList").data("current")){if(navigator.userAgent.match(/MSIE/i)){var n='<img src="'+e("#imageList").data("current")+'"/>';t.restoreSelection.apply(this,[n,"html"])}else{document.execCommand("insertimage",false,e("#imageList").data("current"))}}else{t.showMessage.apply(this,["imgErrMsg","Please select an image"]);return false}e("#InsertImage").modal("hide");e("#contentarea").focus()}},insert_table:{modal:true,modalId:"InsertTable",icon:"fa fa-table",tooltip:"Insert Table",modalHeader:"Insert Table",modalBody:t.tableWidget.apply(this),beforeLoad:function(){e("#tblForm").each(function(){this.reset()})},onSave:function(){t.restoreSelection.apply(this);var n=e("#tblRows").val();var r=e("#tblColumns").val();var i=e("#tblWidth").val();var s=e("#tblHeight").val();var o=e("#tblAlign").val();var u=e("#tblBorder").val();var a=e("#tblCellspacing").val();var f=e("#tblCellpadding").val();var l=/^[0-9]+$/;var c=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/ig;var h=/^[0-9]+\.?([0-9])?$/;if(!n.match(l)){t.showMessage.apply(this,["tblErrMsg","Rows must be a positive number"]);return false}if(!r.match(l)){t.showMessage.apply(this,["tblErrMsg","Columns must be a positive number"]);return false}if(i!=""&&!i.match(c)){t.showMessage.apply(this,["tblErrMsg","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]);return false}if(s!=""&&!s.match(c)){t.showMessage.apply(this,["tblErrMsg","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]);return false}if(u!=""&&!u.match(h)){t.showMessage.apply(this,["tblErrMsg","Border size must be a positive number"]);return false}if(a!=""&&!a.match(h)){t.showMessage.apply(this,["tblErrMsg","Cell spacing must be a positive number"]);return false}if(f!=""&&!f.match(h)){t.showMessage.apply(this,["tblErrMsg","Cell padding must be a positive number"]);return false}var p=e("<div/>");var d=[{attribute:"align",value:o},{attribute:"border",value:u},{attribute:"cellspacing",value:a},{attribute:"cellpadding",value:f},{attribute:"width",value:i},{attribute:"height",value:s}];var v=t.getHTMLTable.apply(this,[n,r,d]);v.appendTo(p);if(navigator.userAgent.match(/MSIE/i))t.restoreSelection.apply(this,[p.html(),"html"]);else document.execCommand("insertHTML",false,p.html());e("#InsertTable").modal("hide");e("#contentarea").focus()}},hr_line:{text:"HR",icon:"fa fa-minus",tooltip:"Horizontal Rule",commandname:"insertHorizontalRule",custom:null},block_quote:{text:"Block Quote",icon:"fa fa-quote-right",tooltip:"Block Quote",commandname:null,custom:function(){t.setStyleWithCSS.apply(this);if(navigator.userAgent.match(/MSIE/i)){document.execCommand("indent",false,null)}else{document.execCommand("formatBlock",false,"<blockquote>")}}},indent:{text:"Indent",icon:"fa fa-indent",tooltip:"Increase Indent",commandname:"indent",custom:null},outdent:{text:"Outdent",icon:"fa fa-outdent",tooltip:"Decrease Indent",commandname:"outdent",custom:null},print:{text:"Print",icon:"fa fa-print",tooltip:"Print",commandname:null,custom:function(){oDoc=document.getElementById("contentarea");var e=window.open("","_blank","width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");e.document.open();e.document.write('<!doctype html><html><head><title>Print</title></head><body onload="print();">'+oDoc.innerHTML+"</body></html>");e.document.close()}},rm_format:{text:"Remove format",icon:"fa fa-eraser",tooltip:"Remove Formatting",commandname:"removeformat",custom:null},select_all:{text:"Select all",icon:"fa fa-file-text",tooltip:"Select All",commandname:null,custom:function(){document.execCommand("selectall",null,null)}},togglescreen:{text:"Toggle Screen",icon:"fa fa-arrows-alt",tooltip:"Toggle Screen",commandname:null,custom:function(t,n){e(".Editor-container").toggleClass("fullscreen");var r=0;if(e("#statusbar").length){r=e("#statusbar").height()}if(e(".Editor-container").hasClass("fullscreen"))e("#contentarea").css({height:e(".Editor-container").height()-(e("#menuBarDiv").height()+r)-13});else e("#contentarea").css({height:""})}},splchars:{text:"S",icon:"fa fa-asterisk",tooltip:"Insert Special Character",commandname:null,custom:function(n){t.restoreIESelection.apply(this);var r=0;var i=e("<div/>",{id:"specialchar","class":"specialCntr",css:{display:"none"}}).click(function(e){e.stopPropagation()});var s=e("<ul />",{id:"special_ui"});if(e("#contentarea").data("splcharsBtn")){r=1;e("#contentarea").data("splcharsBtn",null)}else e("#contentarea").data("splcharsBtn",1);if(r==0){for(var o=0;o<u.length;o++){s.append(e("<li />").html(u[o].text).attr("title",u[o].name).mousedown(function(e){e.preventDefault()}).click(function(n){if(navigator.userAgent.match(/MSIE/i)){var r=e(this).html();t.insertTextAtSelection.apply(this,[r,"html"])}else{document.execCommand("insertHTML",false,e(this).html())}e("#specialchar").remove();e("#contentarea").data("splcharsBtn",null)}))}s.prependTo(i);i.insertAfter(n);e("#specialchar").slideDown("slow")}else e("#specialchar").remove()}},source:{text:"Source",icon:"fa fa-code",tooltip:"Source",commandname:null,custom:function(e,n){t.getSource.apply(this,[e,n])}},params:{obj:null}};var f={texteffects:["bold","italics","underline"],textformats:["ul","indent","outdent"]};var l=e.extend({texteffects:true,aligneffects:false,textformats:true,fonteffects:false,actions:false,insertoptions:false,extraeffects:false,advancedoptions:false,screeneffects:false,bold:true,italics:true,underline:true,ul:true,ol:false,undo:false,redo:false,l_align:false,r_align:false,c_align:false,justify:false,insert_link:false,unlink:false,insert_img:false,hr_line:false,block_quote:false,source:false,strikeout:false,indent:true,outdent:true,print:false,rm_format:false,status_bar:true,insert_table:false,select_all:false,togglescreen:false},n);var c=e("<div/>",{"class":"row-fluid Editor-container"});var h=e(this).hide();h.after(c);var p=e("<div/>",{id:"menuBarDiv","class":"row-fluid"}).prependTo(c);var d=e("<div/>",{"class":"Editor-editor",css:{overflow:"auto"},contenteditable:"true",id:"contentarea"}).appendTo(c);if(l["status_bar"]){var v=e("<div/>",{id:"statusbar","class":"row-fluid",unselectable:"on"}).appendTo(c);e("#contentarea").keyup(function(n){var r=t.getWordCount.apply(this);e("#statusbar").html('<div class="label">'+"Words : "+r+"</div>")})}e(this).data("menuBar",p);e(this).data("editor",d);e(this).data("statusBar",v);for(var m in a){if(!l[m]){if(l[m]in f){for(var g in f[m]){l[g]=false}}continue}if(m in f){var y=e("<div/>",{"class":"btn-group"});for(var b=0;b<f[m].length;b++){var w=f[m][b];if(l[w]){var E=t.createMenuItem.apply(this,[a[w],l[w],true]);y.append(E)}l[w]=false}p.append(y)}else{var E=t.createMenuItem.apply(this,[a[m],l[m],true]);p.append(E)}}e(document.body).mousedown(function(t){var n=e(t.target);if(!n.parents().andSelf().is("#context-menu")){e("#context-menu").remove()}if(!n.parents().andSelf().is("#specialchar")&&n.closest("a").html()!='<i class="fa fa-asterisk"></i>'){if(e("#specialchar").is(":visible")){e("#contentarea").data("splcharsBtn",null);e("#specialchar").remove()}}if(!n.parents().andSelf().is("#paletteCntr")&&n.closest("a").html()!='<i class="fa fa-font"></i>'){if(e("#paletteCntr").is(":visible")){e("#contentarea").data("colorBtn",null);e("#paletteCntr").remove()}}});e("#contentarea").bind("contextmenu",function(n){if(e("#context-menu").length)e("#context-menu").remove();var r=e("<div/>",{id:"context-menu"}).css({position:"absolute",top:n.pageY,left:n.pageX,"z-index":9999}).click(function(e){e.stopPropagation()});var i=e("<ul/>",{"class":"dropdown-menu on",role:"menu"});n.preventDefault();if(e(n.target).is("a")){t.createLinkContext.apply(this,[n,i]);i.appendTo(r);r.appendTo("body")}else if(e(n.target).is("td")){t.createTableContext.apply(this,[n,i]);i.appendTo(r);r.appendTo("body")}else if(e(n.target).is("img")){t.createImageContext.apply(this,[n,i]);i.appendTo(r);r.appendTo("body")}})},createLinkContext:function(t,n){var r=e("<li/>").append(e("<a/>",{id:"rem_link",href:"javascript:void(0)",text:"RemoveLink"}).click(function(t){return function(){e(t.target).contents().unwrap();e("#context-menu").remove()}}(t)));r.appendTo(n)},createImageContext:function(n,r){var i="imgAttribute";var s="Image Attributes";var o=t.imageAttributeWidget.apply(this,["edit"]);var u=function(){var n=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/;var r=e("#imgAlt").val();var i=e("#imgTarget").val();if(r==""){t.showMessage.apply(this,["imageErrMsg","Please enter image alternative text"]);return false}if(i!=""&&!i.match(n)){t.showMessage.apply(this,["imageErrMsg","Please enter valid url"]);return false}if(e("#imgHidden").val()!=""){var s=e("#imgHidden").val();e("#"+s).attr("alt",r);if(i!=""){if(e("#wrap_"+s).length)e("#wrap_"+s).attr("href",i);else e("#"+s).wrap(e("<a/>",{id:"wrap_"+s,href:i,target:"_blank"}))}else{if(e("#wrap_"+s).length)e("#"+s).unwrap()}}e("#imgAttribute").modal("hide");e("#contentarea").focus()};t.createModal.apply(this,[i,s,o,u]);var a=e("<a/>",{href:"#"+i,text:"Image Attributes","data-toggle":"modal"}).click(function(t){return function(){e("#context-menu").remove();var n=(new Date).getTime();e("#imgAlt").val(e(t.target).closest("img").attr("alt"));e("#imgTarget").val("");if(typeof e(t.target).closest("img").attr("id")!=="undefined"){var r=e(t.target).closest("img").attr("id");e("#imgHidden").val(r);if(e("#wrap_"+r).length)e("#imgTarget").val(e("#wrap_"+r).attr("href"));else e("#imgTarget").val("")}else{e(t.target).closest("img").attr("id","img_"+n);e("#imgHidden").val("img_"+n)}}}(n));r.append(e("<li/>").append(a)).append(e("<li/>").append(e("<a/>",{text:"Remove Image"}).click(function(t){return function(){e("#context-menu").remove();e(t.target).closest("img").remove()}}(n))))},createTableContext:function(n,r){e("#editProperties").remove();var i="editProperties";var s="Table Properties";var o=t.tableWidget.apply(this,["edit"]);var u=function(){var r=e("#tblWidthEdt").val();var i=e("#tblHeightEdt").val();var s=e("#tblBorderEdt").val();var o=e("#tblAlignEdt").val();var u=e("#tblCellspacingEdt").val();var a=e("#tblCellpaddingEdt").val();var f=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/ig;var l=/^[0-9]+\.?([0-9])?$/;if(r!=""&&!r.match(f)){t.showMessage.apply(this,["tblErrMsgEdt","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]);return false}if(i!=""&&!i.match(f)){t.showMessage.apply(this,["tblErrMsgEdt","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]);return false}if(s!=""&&!s.match(l)){t.showMessage.apply(this,["tblErrMsgEdt","Border size must be a positive number"]);return false}if(u!=""&&!u.match(l)){t.showMessage.apply(this,["tblErrMsgEdt","Cell spacing must be a positive number"]);return false}if(a!=""&&!a.match(l)){t.showMessage.apply(this,["tblErrMsgEdt","Cell padding must be a positive number"]);return false}e(n.target).closest("table").css("width",r);if(i!="")e(n.target).closest("table").css("height",i);e(n.target).closest("table").attr("align",o);e(n.target).closest("table").attr("border",s);e(n.target).closest("table").attr("cellspacing",u);e(n.target).closest("table").attr("cellpadding",a);e("#editProperties").modal("hide");e("#contentarea").focus()};t.createModal.apply(this,[i,s,o,u]);var a=e("<a/>",{href:"#"+i,text:"Table Properties","data-toggle":"modal"}).click(function(t){return function(){e("#context-menu").remove();e("#tblRowsEdt").val(e(t.target).closest("table").prop("rows").length);e("#tblColumnsEdt").val(e(t.target).closest("table").find("tr")[0].cells.length);e("#tblRowsEdt").attr("disabled","disabled");e("#tblColumnsEdt").attr("disabled","disabled");e("#tblWidthEdt").val(e(t.target).closest("table").get(0).style.width);e("#tblHeightEdt").val(e(t.target).closest("table").get(0).style.height);e("#tblAlignEdt").val(e(t.target).closest("table").attr("align"));e("#tblBorderEdt").val(e(t.target).closest("table").attr("border"));e("#tblCellspacingEdt").val(e(t.target).closest("table").attr("cellspacing"));e("#tblCellpaddingEdt").val(e(t.target).closest("table").attr("cellpadding"))}}(n));r.append(e("<li/>",{"class":"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Row"})).append(e("<ul/>",{"class":"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addrow",href:"javascript:void(0)",text:"Add Row"}).click(function(t){return function(){var n=e(t.target).closest("table").prop("rows").length;var r=e(t.target).closest("table").find("tr")[0].cells.length;var i=e("<tr/>");for(var s=1;s<=r;s++){var o=e("<td/>").html("&nbsp;");o.appendTo(i)}i.appendTo(e(t.target).closest("table"));e("#context-menu").remove()}}(n)))).append(e("<li/>").append(e("<a/>",{text:"Remove Row"}).click(function(t){return function(){e("#context-menu").remove();e(t.target).closest("tr").remove()}}(n)))))).append(e("<li/>",{"class":"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Column"})).append(e("<ul/>",{"class":"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addcolumn",href:"javascript:void(0)",text:"Add Column"}).click(function(t){return function(){var n=e(t.target).closest("table").prop("rows").length;var r=e(t.target).closest("table").find("tr")[0].cells.length;e(t.target).closest("table").find("tr").each(function(){e(this).append(e("<td/>"))});e("#context-menu").remove()}}(n)))).append(e("<li/>").append(e("<a/>",{text:"Remove Column"}).click(function(t){return function(){e("#context-menu").remove();var n=e(t.target).closest("td").length;e(t.target).closest("table").find("tr").each(function(){e(this).find("td:eq("+n+")").remove()})}}(n))))));r.append(e("<li/>").append(a)).append(e("<li/>",{"class":"divider"})).append(e("<li/>").append(e("<a/>",{text:"Remove Table"}).click(function(t){return function(){e("#context-menu").remove();e(t.target).closest("table").remove()}}(n))))},createModal:function(t,n,r,i){var s=e("<a/>",{href:"#"+t,role:"button","class":"btn btn-default","data-toggle":"modal"});var o=e("<div/>",{id:t,"class":"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"h3_"+t,"aria-hidden":"true"}).append(e("<div>",{"class":"modal-dialog"}).append(e("<div>",{"class":"modal-content"}).append(e("<div>",{"class":"modal-header"}).append(e("<button/>",{type:"button","class":"close","data-dismiss":"modal","aria-hidden":"true"}).html("x")).append(e("<h3/>",{id:"h3_"+t}).html(n))).append(e("<div>",{"class":"modal-body"}).append(r)).append(e("<div>",{"class":"modal-footer"}).append(e("<button/>",{type:"button","class":"btn btn-default","data-dismiss":"modal","aria-hidden":"true"}).html("Cancel")).append(e("<button/>",{type:"button","class":"btn btn-success"}).html("Done").mousedown(function(e){e.preventDefault()}).click(function(e){return function(){i.apply(e)}}(this))))));o.appendTo("body");return s},createMenuItem:function(n,r,i){typeof i!=="undefined"?i:false;if(n["select"]){var s=e("<div/>",{"class":"btn-group"});var o=e("<ul/>",{"class":"dropdown-menu"});s.append(e("<a/>",{"class":"btn btn-default dropdown-toggle","data-toggle":"dropdown",href:"javascript:void(0)",title:n["tooltip"]}).html(n["default"]).append(e("<span/>",{"class":"caret"})).mousedown(function(e){e.preventDefault()}));e.each(r,function(t,n){var r=e("<li/>");e("<a/>",{tabindex:"-1",href:"javascript:void(0)"}).html(t).appendTo(r);r.click(function(){e(this).parent().parent().data("value",n);e(this).parent().parent().trigger("change")});o.append(r)});var u="change"}else if(n["modal"]){var s=t.createModal.apply(this,[n["modalId"],n["modalHeader"],n["modalBody"],n["onSave"]]);var o=e("<i/>");if(n["icon"])o.addClass(n["icon"]);else o.html(n["text"]);s.append(o);s.mousedown(function(e,t,n){return function(r){r.preventDefault();t.saveSelection.apply(e);if(n){n.apply(e)}}}(this,t,n["beforeLoad"]));s.attr("title",n["tooltip"]);return s}else{var s=e("<a/>",{href:"javascript:void(0)","class":"btn btn-default"});var o=e("<i/>");if(n["icon"])o.addClass(n["icon"]);else o.html(n["text"]);var u="click"}if(n["custom"]){s.bind(u,function(r,i){return function(){t.saveSelection.apply(r);n["custom"].apply(r,[e(this),i])}}(this,n["params"]))}else{s.data("commandName",n["commandname"]);s.data("editor",e(this).data("editor"));s.bind(u,function(){t.setTextFormat.apply(this)})}s.attr("title",n["tooltip"]);s.css("cursor","pointer");s.append(o);if(i)return s;e(this).data("menuBar").append(s)},setTextFormat:function(){t.setStyleWithCSS.apply(this);document.execCommand(e(this).data("commandName"),false,e(this).data("value")||null);e(this).data("editor").focus();return false},getSource:function(t,n){var r=0;if(t.data("state")){r=1;t.data("state",null)}else t.data("state",1);var i=e(this).data("editor");var s;if(r==0){s=document.createTextNode(i.html());i.empty();i.attr("contenteditable",false);preElement=e("<pre/>",{contenteditable:true});preElement.append(s);i.append(preElement);t.parent().siblings().hide();t.siblings().hide()}else{var o="";ch=i.find(">:first-child").contents().filter(function(){return this.nodeType==3});ch=ch[0];if(typeof ch!="undefined"){o=ch.textContent}i.html(o);i.attr("contenteditable",true);t.parent().siblings().show();t.siblings().show()}},countWords:function(n){var r=0;var i=n.contents().filter(function(){return this.nodeType==3});for(var s=0;s<i.length;s++){text=i[s].textContent;text=text.replace(/[^-\w\s]/gi," ");text=e.trim(text);r=r+text.split(/\s+/).length}var o=n.children().each(function(){r=r+t.countWords.apply(this,[e(this)])});return r},getWordCount:function(){return t.countWords.apply(this,[e("#contentarea")])},rgbToHex:function(e){e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2)},showMessage:function(t,n){var r=e("<div/>",{"class":"alert alert-danger"}).append(e("<button/>",{type:"button","class":"close","data-dismiss":"alert",html:"x"})).append(e("<span/>").html(n));r.appendTo(e("#"+t));setTimeout(function(){e(".alert").alert("close")},3e3)},getText:function(){var t=e(e(this).parent()).find("#contentarea").html();return t},setText:function(t){e(e(this).parent()).find("#contentarea").html(t)},setStyleWithCSS:function(){if(navigator.userAgent.match(/MSIE/i)){try{Editor.execCommand("styleWithCSS",0,false)}catch(e){try{Editor.execCommand("useCSS",0,true)}catch(e){try{Editor.execCommand("styleWithCSS",false,false)}catch(e){}}}}else{document.execCommand("styleWithCSS",null,true)}}};e.fn.Editor=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.Editor")}}})(jQuery)
